(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if(a.type==="childList")for(const n of a.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function i(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?a.credentials="include":e.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(e){if(e.ep)return;e.ep=!0;const a=i(e);fetch(e.href,a)}})();var b=Object.defineProperty,k=(l,i,t)=>i in l?b(l,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[i]=t,v=(l,i,t)=>k(l,typeof i!="symbol"?i+"":i,t);class P{constructor(){v(this,"WIKIDATA_API","https://www.wikidata.org/w/api.php"),v(this,"KATIE_BOUMAN_ID","Q63080922")}async getEnhancementSuggestions(i){try{const t=await this.fetchEntity(this.KATIE_BOUMAN_ID);if(!t)return[];const e=[],a=await this.generateFactSuggestions(t,i);e.push(...a);const n=await this.generateSectionSuggestions(t,i);return e.push(...n),e.sort((r,s)=>s.confidence-r.confidence)}catch(t){return console.error("Error fetching Wikidata suggestions:",t),this.getFallbackSuggestions()}}async fetchEntity(i){var t;const e=new URL(this.WIKIDATA_API);return e.searchParams.set("action","wbgetentities"),e.searchParams.set("ids",i),e.searchParams.set("format","json"),e.searchParams.set("origin","*"),((t=(await(await fetch(e.toString())).json()).entities)==null?void 0:t[i])||null}async generateFactSuggestions(i,t){const e=[],a=t.toLowerCase();if(i.claims.P569&&!a.includes("born")&&!a.includes("birth")){const n=i.claims.P569[0];if(n.mainsnak.datavalue){const r=new Date(n.mainsnak.datavalue.value.time.substring(1,11));e.push({id:"birth-date",type:"fact",title:"Add birth date",content:`Katie Bouman was born on ${r.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}.`,source:"wikidata",property:"P569",confidence:.9,hint:"Basic biographical information"})}}if(i.claims.P69&&!a.includes("university of michigan")){const n=i.claims.P69;for(const r of n)if(r.mainsnak.datavalue){const s=r.mainsnak.datavalue.value.id,o=await this.getItemLabel(s);o&&!a.includes(o.toLowerCase())&&e.push({id:`alma-mater-${s}`,type:"fact",title:`Add education at ${o}`,content:`She studied at ${o}.`,source:"wikidata",property:"P69",confidence:.8,hint:"Educational background"})}}if(i.claims.P108&&!a.includes("california institute of technology")){const n=i.claims.P108;for(const r of n)if(r.mainsnak.datavalue){const s=r.mainsnak.datavalue.value.id,o=await this.getItemLabel(s);o&&!a.includes(o.toLowerCase())&&e.push({id:`employer-${s}`,type:"fact",title:`Add current position at ${o}`,content:`She is currently affiliated with ${o}.`,source:"wikidata",property:"P108",confidence:.85,hint:"Current professional affiliation"})}}return e}async generateSectionSuggestions(i,t){const e=[],a=t.toLowerCase();if(i.claims.P166&&!a.includes("awards")){const n=await this.extractAwards(i.claims.P166);n.length>0&&e.push({id:"awards-section",type:"section",title:"Awards",content:this.generateAwardsSection(n),source:"wikidata",property:"P166",confidence:.9,hint:`Found ${n.length} award${n.length>1?"s":""} in Wikidata`})}if(i.claims.P69&&!a.includes("education")){const n=await this.extractEducation(i.claims.P69);n.length>0&&e.push({id:"education-section",type:"section",title:"Education",content:this.generateEducationSection(n),source:"wikidata",property:"P69",confidence:.85,hint:"Academic background and degrees"})}if(i.claims.P800&&!a.includes("notable works")){const n=await this.extractNotableWorks(i.claims.P800);n.length>0&&e.push({id:"works-section",type:"section",title:"Notable Works",content:this.generateWorksSection(n),source:"wikidata",property:"P800",confidence:.8,hint:`Found ${n.length} notable work${n.length>1?"s":""}`})}return e}async getItemLabel(i){var t,e;try{const a=await this.fetchEntity(i);return((e=(t=a==null?void 0:a.labels)==null?void 0:t.en)==null?void 0:e.value)||null}catch{return null}}async extractAwards(i){var t,e,a,n,r;const s=[];for(const o of i.slice(0,10))if(o.mainsnak.datavalue){const u=o.mainsnak.datavalue.value.id,c=await this.getItemLabel(u);if(c){const d=(r=(n=(a=(e=(t=o.qualifiers)==null?void 0:t.P585)==null?void 0:e[0])==null?void 0:a.datavalue)==null?void 0:n.value)!=null&&r.time?new Date(o.qualifiers.P585[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;s.push({name:c,year:d})}}return s}async extractEducation(i){var t,e,a,n,r,s,o,u,c,d;const h=[];for(const f of i)if(f.mainsnak.datavalue){const p=f.mainsnak.datavalue.value.id,m=await this.getItemLabel(p);if(m){const g=(r=(n=(a=(e=(t=f.qualifiers)==null?void 0:t.P512)==null?void 0:e[0])==null?void 0:a.datavalue)==null?void 0:n.value)==null?void 0:r.id,y=g&&await this.getItemLabel(g)||void 0,w=(d=(c=(u=(o=(s=f.qualifiers)==null?void 0:s.P582)==null?void 0:o[0])==null?void 0:u.datavalue)==null?void 0:c.value)!=null&&d.time?new Date(f.qualifiers.P582[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;h.push({institution:m,degree:y,year:w})}}return h}async extractNotableWorks(i){var t,e,a,n,r;const s=[];for(const o of i.slice(0,8))if(o.mainsnak.datavalue){const u=o.mainsnak.datavalue.value.id,c=await this.getItemLabel(u);if(c){const d=(r=(n=(a=(e=(t=o.qualifiers)==null?void 0:t.P577)==null?void 0:e[0])==null?void 0:a.datavalue)==null?void 0:n.value)!=null&&r.time?new Date(o.qualifiers.P577[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;s.push({title:c,year:d})}}return s}generateAwardsSection(i){return`<p>Bouman has received recognition for her contributions to computational imaging and the Event Horizon Telescope project:</p>
                <ul>
                    ${i.sort((t,e)=>(e.year||0)-(t.year||0)).map(t=>`<li>${t.year?t.year+" - ":""}${t.name}</li>`).join(`
                    `)}
                </ul>`}generateEducationSection(i){return`<p>Bouman completed her education at the following institutions:</p>
                <ul>
                    ${i.sort((t,e)=>(t.year||0)-(e.year||0)).map(t=>{let e=t.degree?`${t.degree} - ${t.institution}`:t.institution;return t.year&&(e+=` (${t.year})`),`<li>${e}</li>`}).join(`
                    `)}
                </ul>`}generateWorksSection(i){return`<p>Bouman has contributed to several significant works in computational imaging:</p>
                <ul>
                    ${i.sort((t,e)=>(e.year||0)-(t.year||0)).map(t=>`<li>${t.year?t.year+" - ":""}"${t.title}"</li>`).join(`
                    `)}
                </ul>`}getFallbackSuggestions(){return[{id:"harvard-fallback",type:"fact",title:"Harvard postdoctoral fellowship",content:"Bouman joined Harvard University as a postdoctoral fellow on the Event Horizon Telescope Imaging team (2018)",source:"wikidata",confidence:.8,hint:"Career milestone"},{id:"caltech-fallback",type:"fact",title:"Caltech professorship",content:"She then joined the California Institute of Technology (Caltech) as an assistant professor in June 2019, later promoted to associate professor",source:"wikidata",confidence:.8,hint:"Current position"}]}}export{P as I};
