(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&e(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function e(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function t(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();var b=Object.defineProperty,P=(l,n,t)=>n in l?b(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,p=(l,n,t)=>P(l,typeof n!="symbol"?n+"":n,t);class k{constructor(){p(this,"WIKIDATA_API","https://www.wikidata.org/w/api.php"),p(this,"KATIE_BOUMAN_ID","Q63080922")}async getEnhancementSuggestions(n){try{const t=await this.fetchEntity(this.KATIE_BOUMAN_ID);if(!t)return[];const e=[],i=await this.generateFactSuggestions(t,n);e.push(...i);const a=await this.generateSectionSuggestions(t,n);return e.push(...a),e.sort((o,s)=>s.confidence-o.confidence)}catch(t){return console.error("Error fetching Wikidata suggestions:",t),this.getFallbackSuggestions()}}async fetchEntity(n){var t;const e=new URL(this.WIKIDATA_API);return e.searchParams.set("action","wbgetentities"),e.searchParams.set("ids",n),e.searchParams.set("format","json"),e.searchParams.set("origin","*"),((t=(await(await fetch(e.toString())).json()).entities)==null?void 0:t[n])||null}async generateFactSuggestions(n,t){const e=[],i=t.toLowerCase();if(n.claims.P569&&!i.includes("born")&&!i.includes("birth")){const a=n.claims.P569[0];if(a.mainsnak.datavalue){const o=new Date(a.mainsnak.datavalue.value.time.substring(1,11));e.push({id:"birth-date",type:"fact",title:"Add birth date",content:`Katie Bouman was born on ${o.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}.`,source:"wikidata",property:"P569",confidence:.9,hint:"Basic biographical information"})}}if(n.claims.P69&&!i.includes("university of michigan")){const a=n.claims.P69;for(const o of a)if(o.mainsnak.datavalue){const s=o.mainsnak.datavalue.value.id,r=await this.getItemLabel(s);r&&!i.includes(r.toLowerCase())&&e.push({id:`alma-mater-${s}`,type:"fact",title:`Add education at ${r}`,content:`She studied at ${r}.`,source:"wikidata",property:"P69",confidence:.8,hint:"Educational background"})}}if(n.claims.P108&&!i.includes("california institute of technology")){const a=n.claims.P108;for(const o of a)if(o.mainsnak.datavalue){const s=o.mainsnak.datavalue.value.id,r=await this.getItemLabel(s);r&&!i.includes(r.toLowerCase())&&e.push({id:`employer-${s}`,type:"fact",title:`Add current position at ${r}`,content:`She is currently affiliated with ${r}.`,source:"wikidata",property:"P108",confidence:.85,hint:"Current professional affiliation"})}}return e}async generateSectionSuggestions(n,t){const e=[],i=t.toLowerCase();if(n.claims.P166&&!i.includes("awards")){const a=await this.extractAwards(n.claims.P166);a.length>0&&e.push({id:"awards-section",type:"section",title:"Awards",content:this.generateAwardsSection(a),source:"wikidata",property:"P166",confidence:.9,hint:`Found ${a.length} award${a.length>1?"s":""} in Wikidata`})}if(n.claims.P69&&!i.includes("education")){const a=await this.extractEducation(n.claims.P69);a.length>0&&e.push({id:"education-section",type:"section",title:"Education",content:this.generateEducationSection(a),source:"wikidata",property:"P69",confidence:.85,hint:"Academic background and degrees"})}if(n.claims.P800&&!i.includes("notable works")){const a=await this.extractNotableWorks(n.claims.P800);a.length>0&&e.push({id:"works-section",type:"section",title:"Notable Works",content:this.generateWorksSection(a),source:"wikidata",property:"P800",confidence:.8,hint:`Found ${a.length} notable work${a.length>1?"s":""}`})}return e}async getItemLabel(n){var t,e;try{const i=await this.fetchEntity(n);return((e=(t=i==null?void 0:i.labels)==null?void 0:t.en)==null?void 0:e.value)||null}catch{return null}}async extractAwards(n){var t,e,i,a,o;const s=[];for(const r of n.slice(0,10))if(r.mainsnak.datavalue){const u=r.mainsnak.datavalue.value.id,c=await this.getItemLabel(u);if(c){const d=(o=(a=(i=(e=(t=r.qualifiers)==null?void 0:t.P585)==null?void 0:e[0])==null?void 0:i.datavalue)==null?void 0:a.value)!=null&&o.time?new Date(r.qualifiers.P585[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;s.push({name:c,year:d})}}return s}async extractEducation(n){var t,e,i,a,o,s,r,u,c,d;const h=[];for(const f of n)if(f.mainsnak.datavalue){const v=f.mainsnak.datavalue.value.id,m=await this.getItemLabel(v);if(m){const g=(o=(a=(i=(e=(t=f.qualifiers)==null?void 0:t.P512)==null?void 0:e[0])==null?void 0:i.datavalue)==null?void 0:a.value)==null?void 0:o.id,y=g&&await this.getItemLabel(g)||void 0,w=(d=(c=(u=(r=(s=f.qualifiers)==null?void 0:s.P582)==null?void 0:r[0])==null?void 0:u.datavalue)==null?void 0:c.value)!=null&&d.time?new Date(f.qualifiers.P582[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;h.push({institution:m,degree:y,year:w})}}return h}async extractNotableWorks(n){var t,e,i,a,o;const s=[];for(const r of n.slice(0,8))if(r.mainsnak.datavalue){const u=r.mainsnak.datavalue.value.id,c=await this.getItemLabel(u);if(c){const d=(o=(a=(i=(e=(t=r.qualifiers)==null?void 0:t.P577)==null?void 0:e[0])==null?void 0:i.datavalue)==null?void 0:a.value)!=null&&o.time?new Date(r.qualifiers.P577[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;s.push({title:c,year:d})}}return s}generateAwardsSection(n){return`<p>Bouman has received recognition for her contributions to computational imaging and the Event Horizon Telescope project:</p>
                <ul>
                    ${n.sort((t,e)=>(e.year||0)-(t.year||0)).map(t=>`<li>${t.year?t.year+" - ":""}${t.name}</li>`).join(`
                    `)}
                </ul>`}generateEducationSection(n){return`<p>Bouman completed her education at the following institutions:</p>
                <ul>
                    ${n.sort((t,e)=>(t.year||0)-(e.year||0)).map(t=>{let e=t.degree?`${t.degree} - ${t.institution}`:t.institution;return t.year&&(e+=` (${t.year})`),`<li>${e}</li>`}).join(`
                    `)}
                </ul>`}generateWorksSection(n){return`<p>Bouman has contributed to several significant works in computational imaging:</p>
                <ul>
                    ${n.sort((t,e)=>(e.year||0)-(t.year||0)).map(t=>`<li>${t.year?t.year+" - ":""}"${t.title}"</li>`).join(`
                    `)}
                </ul>`}getFallbackSuggestions(){return[{id:"harvard-fallback",type:"fact",title:"Harvard postdoctoral fellowship",content:"Bouman joined Harvard University as a postdoctoral fellow on the Event Horizon Telescope Imaging team (2018)",source:"wikidata",confidence:.8,hint:"Career milestone"},{id:"caltech-fallback",type:"fact",title:"Caltech professorship",content:"She then joined the California Institute of Technology (Caltech) as an assistant professor in June 2019, later promoted to associate professor",source:"wikidata",confidence:.8,hint:"Current position"}]}}export{k as I};
