var S=Object.defineProperty;var y=(l,e,n)=>e in l?S(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var g=(l,e,n)=>y(l,typeof e!="symbol"?e+"":e,n);import"./codex-BYAibwde.js";class b{constructor(){g(this,"WIKIDATA_API","https://www.wikidata.org/w/api.php");g(this,"KATIE_BOUMAN_ID","Q56312040")}async getEnhancementSuggestions(e){try{const n=await this.fetchEntity(this.KATIE_BOUMAN_ID);if(!n)return[];const a=[],t=await this.generateFactSuggestions(n,e);a.push(...t);const i=await this.generateSectionSuggestions(n,e);return a.push(...i),a.sort((s,r)=>r.confidence-s.confidence)}catch(n){return console.error("Error fetching Wikidata suggestions:",n),this.getFallbackSuggestions()}}async fetchEntity(e){var i;const n=new URL(this.WIKIDATA_API);return n.searchParams.set("action","wbgetentities"),n.searchParams.set("ids",e),n.searchParams.set("format","json"),n.searchParams.set("origin","*"),((i=(await(await fetch(n.toString())).json()).entities)==null?void 0:i[e])||null}async generateFactSuggestions(e,n){const a=[],t=n.toLowerCase();if(e.claims.P569&&!t.includes("born")&&!t.includes("birth")){const i=e.claims.P569[0];if(i.mainsnak.datavalue){const s=new Date(i.mainsnak.datavalue.value.time.substring(1,11));a.push({id:"birth-date",type:"fact",title:"Add birth date",content:`Katie Bouman was born on ${s.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}.`,source:"wikidata",property:"P569",confidence:.9,hint:"Basic biographical information"})}}if(e.claims.P69&&!t.includes("university of michigan")){const i=e.claims.P69;for(const s of i)if(s.mainsnak.datavalue){const r=s.mainsnak.datavalue.value.id,o=await this.getItemLabel(r);o&&!t.includes(o.toLowerCase())&&a.push({id:`alma-mater-${r}`,type:"fact",title:`Add education at ${o}`,content:`She studied at ${o}.`,source:"wikidata",property:"P69",confidence:.8,hint:"Educational background"})}}if(e.claims.P108&&!t.includes("california institute of technology")){const i=e.claims.P108;for(const s of i)if(s.mainsnak.datavalue){const r=s.mainsnak.datavalue.value.id,o=await this.getItemLabel(r);o&&!t.includes(o.toLowerCase())&&a.push({id:`employer-${r}`,type:"fact",title:`Add current position at ${o}`,content:`She is currently affiliated with ${o}.`,source:"wikidata",property:"P108",confidence:.85,hint:"Current professional affiliation"})}}return a}async generateSectionSuggestions(e,n){const a=[],t=n.toLowerCase();if(e.claims.P166&&!t.includes("awards")){const i=await this.extractAwards(e.claims.P166);i.length>0&&a.push({id:"awards-section",type:"section",title:"Awards",content:this.generateAwardsSection(i),source:"wikidata",property:"P166",confidence:.9,hint:`Found ${i.length} award${i.length>1?"s":""} in Wikidata`})}if(e.claims.P69&&!t.includes("education")){const i=await this.extractEducation(e.claims.P69);i.length>0&&a.push({id:"education-section",type:"section",title:"Education",content:this.generateEducationSection(i),source:"wikidata",property:"P69",confidence:.85,hint:"Academic background and degrees"})}if(e.claims.P800&&!t.includes("notable works")){const i=await this.extractNotableWorks(e.claims.P800);i.length>0&&a.push({id:"works-section",type:"section",title:"Notable Works",content:this.generateWorksSection(i),source:"wikidata",property:"P800",confidence:.8,hint:`Found ${i.length} notable work${i.length>1?"s":""}`})}return a}async getItemLabel(e){var n,a;try{const t=await this.fetchEntity(e);return((a=(n=t==null?void 0:t.labels)==null?void 0:n.en)==null?void 0:a.value)||null}catch{return null}}async extractAwards(e){var a,t,i,s,r;const n=[];for(const o of e.slice(0,10))if(o.mainsnak.datavalue){const d=o.mainsnak.datavalue.value.id,c=await this.getItemLabel(d);if(c){const u=(r=(s=(i=(t=(a=o.qualifiers)==null?void 0:a.P585)==null?void 0:t[0])==null?void 0:i.datavalue)==null?void 0:s.value)!=null&&r.time?new Date(o.qualifiers.P585[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;n.push({name:c,year:u})}}return n}async extractEducation(e){var a,t,i,s,r,o,d,c,u,m;const n=[];for(const h of e)if(h.mainsnak.datavalue){const w=h.mainsnak.datavalue.value.id,p=await this.getItemLabel(w);if(p){const f=(r=(s=(i=(t=(a=h.qualifiers)==null?void 0:a.P512)==null?void 0:t[0])==null?void 0:i.datavalue)==null?void 0:s.value)==null?void 0:r.id,v=f&&await this.getItemLabel(f)||void 0,k=(m=(u=(c=(d=(o=h.qualifiers)==null?void 0:o.P582)==null?void 0:d[0])==null?void 0:c.datavalue)==null?void 0:u.value)!=null&&m.time?new Date(h.qualifiers.P582[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;n.push({institution:p,degree:v,year:k})}}return n}async extractNotableWorks(e){var a,t,i,s,r;const n=[];for(const o of e.slice(0,8))if(o.mainsnak.datavalue){const d=o.mainsnak.datavalue.value.id,c=await this.getItemLabel(d);if(c){const u=(r=(s=(i=(t=(a=o.qualifiers)==null?void 0:a.P577)==null?void 0:t[0])==null?void 0:i.datavalue)==null?void 0:s.value)!=null&&r.time?new Date(o.qualifiers.P577[0].datavalue.value.time.substring(1,5)).getFullYear():void 0;n.push({title:c,year:u})}}return n}generateAwardsSection(e){return`<p>Bouman has received recognition for her contributions to computational imaging and the Event Horizon Telescope project:</p>
                <ul>
                    ${e.sort((t,i)=>(i.year||0)-(t.year||0)).map(t=>`<li>${t.year?t.year+" - ":""}${t.name}</li>`).join(`
                    `)}
                </ul>`}generateEducationSection(e){return`<p>Bouman completed her education at the following institutions:</p>
                <ul>
                    ${e.sort((t,i)=>(t.year||0)-(i.year||0)).map(t=>{let i=t.degree?`${t.degree} - ${t.institution}`:t.institution;return t.year&&(i+=` (${t.year})`),`<li>${i}</li>`}).join(`
                    `)}
                </ul>`}generateWorksSection(e){return`<p>Bouman has contributed to several significant works in computational imaging:</p>
                <ul>
                    ${e.sort((t,i)=>(i.year||0)-(t.year||0)).map(t=>`<li>${t.year?t.year+" - ":""}"${t.title}"</li>`).join(`
                    `)}
                </ul>`}getFallbackSuggestions(){return[{id:"harvard-fallback",type:"fact",title:"Harvard postdoctoral fellowship",content:"Bouman joined Harvard University as a postdoctoral fellow on the Event Horizon Telescope Imaging team (2018)",source:"wikidata",confidence:.8,hint:"Career milestone"},{id:"caltech-fallback",type:"fact",title:"Caltech professorship",content:"She then joined the California Institute of Technology (Caltech) as an assistant professor in June 2019, later promoted to associate professor",source:"wikidata",confidence:.8,hint:"Current position"}]}}class E{constructor(){g(this,"addedContent",new Set);g(this,"wikidataService");g(this,"wikidataSuggestions",new Map);this.wikidataService=new b,this.initialize()}async initialize(){await this.loadWikidataSuggestions(),this.checkForAppliedSuggestions(),this.updateSuggestionCount()}async loadWikidataSuggestions(){try{const e=this.getExistingArticleContent();(await this.wikidataService.getEnhancementSuggestions(e)).forEach(a=>{this.wikidataSuggestions.set(a.id,a)})}catch(e){console.error("Error loading Wikidata suggestions:",e)}}getExistingArticleContent(){const e=document.getElementById("researchCareerContent");return(e==null?void 0:e.textContent)||""}checkForAppliedSuggestions(){const e=sessionStorage.getItem("selectedSuggestions"),n=sessionStorage.getItem("wikidataSuggestions");if(e){n&&JSON.parse(n).forEach(i=>{this.wikidataSuggestions.set(i.id,i)});const a=JSON.parse(e);this.applySuggestions(a),sessionStorage.removeItem("selectedSuggestions"),sessionStorage.removeItem("wikidataSuggestions")}}applySuggestions(e){const n=[],a=[];e.forEach(t=>{const[i,s]=t.split("-");i==="fact"?n.push(s):i==="section"&&a.push(s)}),n.forEach(t=>{this.addFact(t)}),a.forEach(t=>{this.addSection(t)}),e.forEach(t=>{this.addedContent.add(t)}),this.updateSuggestionCount(),this.showSuccessFeedback()}addFact(e){const a=document.getElementById("researchCareerContent").querySelector("p"),t=this.wikidataSuggestions.get(e);if(t){const i=`<span class="fact-highlight"> ${t.content}</span>`;a.innerHTML+=i;return}if(e==="harvard-fallback"){const i=a.innerHTML;a.innerHTML=i.replace("on the Event Horizon Telescope Imaging team",'on the Event Horizon Telescope Imaging team <span class="fact-highlight">(2018)</span>')}else if(e==="caltech-fallback"){const i=' She then joined the California Institute of Technology (Caltech) as an assistant professor in June 2019, where she was later promoted to associate professor of computing and mathematical sciences, electrical engineering, and astronomy, as well as a Rosenberg Scholar in 2024.<sup class="reference">[21]</sup>',s=a.innerHTML;a.innerHTML=s.replace("</sup></p>",'</sup><span class="fact-highlight">'+i+"</span></p>")}}addSection(e){const n=document.getElementById("newSectionsContainer"),a=this.wikidataSuggestions.get(e);if(a){const i=document.createElement("section");i.className="article-section article-section--new",i.innerHTML=`
                <h2 class="article-section__title">${a.title}</h2>
                <div class="article-section__content">
                    ${a.content}
                </div>
            `,n.appendChild(i);return}const t={awards:{title:"Awards",content:`<p>Bouman has received numerous awards and honors for her contributions to computational imaging and the Event Horizon Telescope project:</p>
                <ul>
                    <li>2019 - Breakthrough Prize in Fundamental Physics (shared with EHT collaboration)</li>
                    <li>2020 - Diamond Achievement Award from Purdue University</li>
                    <li>2021 - Royal Photographic Society Progress Medal</li>
                    <li>2022 - Named to MIT Technology Review's Innovators Under 35</li>
                </ul>`},works:{title:"Notable Works",content:`<p>Bouman has published extensively in the fields of computational imaging and black hole visualization:</p>
                <ul>
                    <li>"Computational Imaging for VLBI Image Reconstruction" (2016) - PhD thesis</li>
                    <li>"CHIRP: Continuous High-resolution Image Reconstruction using Patch priors" (2016)</li>
                    <li>"First M87 Event Horizon Telescope Results" (2019) - series of papers with EHT collaboration</li>
                    <li>"Reconstructing Video from Interferometric Measurements of Time-Varying Sources" (2019)</li>
                </ul>`},education:{title:"Education",content:`<p>Bouman completed her education at prestigious institutions:</p>
                <ul>
                    <li>B.S. in Electrical Engineering - University of Michigan (2011)</li>
                    <li>M.S. in Electrical Engineering - Massachusetts Institute of Technology (2013)</li>
                    <li>Ph.D. in Electrical Engineering and Computer Science - Massachusetts Institute of Technology (2017)</li>
                </ul>
                <p>Her doctoral advisor was William T. Freeman, and her thesis focused on "Computational Imaging for VLBI Image Reconstruction".</p>`},personal:{title:"Personal life",content:`<p>Katie Bouman was born in 1989 in West Lafayette, Indiana. She grew up in an academic environment, with her father being a professor of electrical and computer engineering at Purdue University.</p>
                <p>Bouman has spoken about the importance of interdisciplinary collaboration in science and has been an advocate for encouraging young women to pursue careers in STEM fields. She frequently gives talks at universities and conferences about computational imaging and the process behind capturing the first image of a black hole.</p>`}};if(t[e]){const i=document.createElement("section");i.className="article-section article-section--new",i.innerHTML=`
                <h2 class="article-section__title">${t[e].title}</h2>
                <div class="article-section__content">
                    ${t[e].content}
                </div>
            `,n.appendChild(i)}}updateSuggestionCount(){const a=6-this.addedContent.size,t=document.getElementById("suggestionCount");if(a>0)t.textContent=`${a} ideas`;else{t.textContent="All done!";const i=document.getElementById("smartWidgetTrigger");i.style.opacity="0.6"}}showSuccessFeedback(){const e=document.createElement("div");e.className="success-feedback",e.textContent="✓ Changes applied successfully!",e.style.cssText=`
            position: fixed;
            bottom: 32px;
            left: 50%;
            transform: translateX(-50%);
            background: #00af89;
            color: white;
            padding: 12px 24px;
            border-radius: 4px;
            font-weight: 500;
            z-index: 1000;
            animation: fadeInOut 3s ease;
        `,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}}document.addEventListener("DOMContentLoaded",()=>{new E});
