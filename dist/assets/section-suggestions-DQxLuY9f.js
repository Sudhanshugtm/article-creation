import"./codex-BYAibwde.js";document.addEventListener("DOMContentLoaded",()=>{console.log("=== PERMANENT FIX: Creating working section selection ==="),setTimeout(()=>{const o=new Set;function c(){const e=o.size,s=document.getElementById("applyButton"),t=document.getElementById("selectionCount"),n=document.getElementById("pluralS");!s||!t||!n||(console.log(`Updating UI with count: ${e}`),s.disabled=e===0,t.textContent=e.toString(),n.style.display=e===1?"none":"inline",console.log(`UI updated: button disabled=${s.disabled}, count=${e}`))}const d=document.querySelectorAll(".suggestion-item__add-btn");console.log(`Found ${d.length} section buttons to fix`),d.forEach(e=>{e.addEventListener("click",s=>{const t=s.currentTarget,n=t.closest(".suggestion-item--section"),a=n.dataset.section,i=`section-${a}`;console.log(`=== PERMANENT FIX: Section ${a} clicked ===`),o.has(i)?(console.log(`Deselecting ${i}`),o.delete(i),t.classList.remove("selected"),n.classList.remove("selected")):(console.log(`Selecting ${i}`),o.add(i),t.classList.add("selected"),n.classList.add("selected")),c(),window.permanentSelectedSuggestions=o})});const l=document.getElementById("applyButton");l&&l.addEventListener("click",()=>{if(window.permanentSelectedSuggestions&&window.permanentSelectedSuggestions.size>0){console.log("=== APPLYING PERMANENT SELECTIONS ===",Array.from(window.permanentSelectedSuggestions)),sessionStorage.setItem("selectedSuggestions",JSON.stringify(Array.from(window.permanentSelectedSuggestions)));const e=document.createElement("div");e.style.cssText=`
                        position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
                        background: #00af89; color: white; padding: 16px 32px; border-radius: 8px;
                        font-weight: 500; z-index: 10000; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                    `,e.textContent=`âœ“ ${window.permanentSelectedSuggestions.size} suggestion${window.permanentSelectedSuggestions.size===1?"":"s"} will be applied!`,document.body.appendChild(e),setTimeout(()=>{window.location.href="./section-expansion.html"},1e3)}}),c(),console.log("=== PERMANENT FIX APPLIED ===")},500)});
