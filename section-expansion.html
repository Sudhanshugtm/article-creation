<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">Katie Bouman - Wikipedia</title>
  <script type="module" src="./assets/section-expansion-R50QQbm4.js"></script>
  <link rel="stylesheet" href="./src/styles/codex.css">
  <link rel="stylesheet" href="./src/styles/section-expansion.css">
</head>
<body>
    <div class="article-expansion">
        <!-- Wikipedia-style header -->
        <header class="article-header">
            <div class="article-header__nav">
                <button class="cdx-button cdx-button--fake-button cdx-button--fake-button--enabled" onclick="window.location.href='./section-creation.html'">
                    <span class="cdx-icon cdx-icon--medium">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
                            <path d="M4 10l5-5v3h7v4h-7v3z"/>
                        </svg>
                    </span>
                </button>
            </div>
            <div class="article-header__title-wrapper">
                <h1 class="article-header__title" id="articleTitle">Katie Bouman</h1>
                <div class="article-header__subtitle" id="articleSubtitle">American computer scientist and engineer</div>
            </div>
        </header>

        <!-- Article content -->
        <main class="article-content">
            <article class="article-body" id="articleBody">
                <!-- Dynamic content will be loaded here -->
            </article>
        </main>

        <!-- Smart Widget -->
        <div class="smart-widget" id="smartWidget">
            <button class="smart-widget__trigger" id="smartWidgetTrigger" onclick="window.location.href='./section-suggestions.html'">
                <span class="smart-widget__icon">ðŸ’¡</span>
                <span class="smart-widget__text">What to improve?</span>
                <span class="smart-widget__badge" id="suggestionCount">8 ideas</span>
            </button>
        </div>
    </div>

    <script>
        // Load selected article content from sessionStorage
        document.addEventListener('DOMContentLoaded', function() {
            const selectedArticleData = sessionStorage.getItem('selectedArticle');
            
            if (selectedArticleData) {
                const article = JSON.parse(selectedArticleData);
                loadArticleContent(article);
            } else {
                // Fallback to Katie Bouman if no selection found
                loadDefaultContent();
            }
        });

        function loadArticleContent(article) {
            // Update page title and header
            document.getElementById('pageTitle').textContent = article.title + ' - Wikipedia';
            document.getElementById('articleTitle').textContent = article.title;
            document.getElementById('articleSubtitle').textContent = article.description;
            
            // Convert MediaWiki markup to HTML
            const htmlContent = convertMediaWikiToHTML(article.content);
            document.getElementById('articleBody').innerHTML = htmlContent;
        }

        function convertMediaWikiToHTML(mediaWikiText) {
            let html = mediaWikiText;
            
            // Convert section headers
            html = html.replace(/^== (.+?) ==$/gm, '<section class="article-section"><h2 class="article-section__title">$1</h2><div class="article-section__content">');
            html = html.replace(/^=== (.+?) ===$/gm, '<h3 class="article-subsection__title">$1</h3>');
            
            // Convert paragraphs
            html = html.split('\n\n').map(paragraph => {
                paragraph = paragraph.trim();
                if (paragraph === '') return '';
                if (paragraph.startsWith('<section') || paragraph.startsWith('<h3') || paragraph.startsWith('*')) {
                    return paragraph;
                }
                return '<p>' + paragraph + '</p>';
            }).join('\n');
            
            // Close section divs before new sections
            html = html.replace(/<section class="article-section">/g, '</div></section><section class="article-section">');
            html = html.replace(/^<\/div><\/section>/, ''); // Remove first closing tags
            
            // Convert lists
            html = html.replace(/^\* (.+)$/gm, '<li>$1</li>');
            html = html.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
            
            // Convert wiki links to regular links (simplified)
            html = html.replace(/\[\[([^\]|]+)(\|[^\]]+)?\]\]/g, '<a href="#" class="wiki-link">$1</a>');
            
            // Convert external links (simplified)
            html = html.replace(/\[([^\s]+) ([^\]]+)\]/g, '<a href="$1" class="external-link">$2</a>');
            
            // Add closing div for last section
            html += '</div></section>';
            
            // Add placeholder for new sections
            html += '<div id="newSectionsContainer"></div>';
            
            return html;
        }

        function loadDefaultContent() {
            const defaultArticle = {
                title: 'Katie Bouman',
                description: 'American computer scientist and engineer',
                content: `Katie Bouman is an American computer scientist and engineer. She is known for her work on the Event Horizon Telescope project, particularly for developing algorithms for imaging black holes.

== Early life and education ==
Katie Bouman earned her Ph.D. in electrical engineering and computer science from MIT in 2017.

== Research and career ==
After earning her doctorate, Bouman joined Harvard University as a postdoctoral fellow on the Event Horizon Telescope Imaging team. She led the development of an algorithm for imaging black holes, known as Continuous High-resolution Image Reconstruction using Patch priors (CHIRP).

== Recognition ==
Bouman received significant media attention after a photo showing her reaction to the detection of the black hole shadow in the EHT images went viral.`
            };
            loadArticleContent(defaultArticle);
        }
    </script>

</body>
</html>